[gd_resource type="VisualShader" load_steps=40 format=3 uid="uid://by6721ofp3gxj"]

[sub_resource type="VisualShaderNodeFloatParameter" id="VisualShaderNodeFloatParameter_rqx40"]
parameter_name = "DissolveStrength"
hint = 1
default_value_enabled = true

[sub_resource type="VisualShaderNodeUVFunc" id="VisualShaderNodeUVFunc_ifn48"]

[sub_resource type="VisualShaderNodeVec2Parameter" id="VisualShaderNodeVec2Parameter_2vnsh"]
parameter_name = "DissolveSpeed"

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_pwgs7"]
default_input_values = [0, Vector2(0, 0), 1, Vector2(0, 0)]
op_type = 0
operator = 2

[sub_resource type="VisualShaderNodeVec2Parameter" id="VisualShaderNodeVec2Parameter_4o34k"]
parameter_name = "DissolveScale"
default_value_enabled = true
default_value = Vector2(1, 1)

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_gh632"]
default_input_values = [0, Vector2(0, 0), 1, Vector2(0, 0)]
op_type = 0
operator = 2

[sub_resource type="VisualShaderNodeVectorDecompose" id="VisualShaderNodeVectorDecompose_wbxm7"]

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_v8adm"]
default_input_values = [0, Vector2(0, 0), 1, Vector2(0, 0)]
op_type = 0
operator = 2

[sub_resource type="VisualShaderNodeRemap" id="VisualShaderNodeRemap_qngqh"]
default_input_values = [1, -1.0, 2, 1.0, 3, 1.0, 4, 0.2]

[sub_resource type="VisualShaderNodeRemap" id="VisualShaderNodeRemap_3ib78"]
default_input_values = [1, -0.5, 2, 0.0, 3, 0.0, 4, 1.0]

[sub_resource type="VisualShaderNodeTexture2DParameter" id="VisualShaderNodeTexture2DParameter_4wumv"]
parameter_name = "vectMainTex"

[sub_resource type="VisualShaderNodeVectorDecompose" id="VisualShaderNodeVectorDecompose_5ojyf"]

[sub_resource type="VisualShaderNodeFloatOp" id="VisualShaderNodeFloatOp_2tgi7"]
operator = 2

[sub_resource type="VisualShaderNodeClamp" id="VisualShaderNodeClamp_1rore"]

[sub_resource type="VisualShaderNodeVectorDecompose" id="VisualShaderNodeVectorDecompose_uuin5"]

[sub_resource type="VisualShaderNodeFloatOp" id="VisualShaderNodeFloatOp_tlr4l"]
operator = 2

[sub_resource type="VisualShaderNodeVectorDecompose" id="VisualShaderNodeVectorDecompose_7k37n"]
default_input_values = [0, Vector2(0, 0)]
op_type = 0

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_g1laj"]
default_input_values = [0, Vector2(0, 0), 1, Vector2(0, 0)]
op_type = 0

[sub_resource type="VisualShaderNodeFloatOp" id="VisualShaderNodeFloatOp_vn7pk"]
default_input_values = [0, 0.0, 1, 0.2]
operator = 2

[sub_resource type="VisualShaderNodeFloatOp" id="VisualShaderNodeFloatOp_w3avm"]
default_input_values = [0, 0.0, 1, -0.1]

[sub_resource type="VisualShaderNodeClamp" id="VisualShaderNodeClamp_3jm8e"]
default_input_values = [0, Vector2(0, 0), 1, Vector2(0, 0), 2, Vector2(1, 1)]
op_type = 3

[sub_resource type="VisualShaderNodeTexture" id="VisualShaderNodeTexture_vwnnr"]
source = 5

[sub_resource type="VisualShaderNodeFloatFunc" id="VisualShaderNodeFloatFunc_8w886"]
function = 31

[sub_resource type="VisualShaderNodeRandomRange" id="VisualShaderNodeRandomRange_sgdgy"]
default_input_values = [0, Vector3(1, 1, 1), 1, 0.0, 2, 4.0]

[sub_resource type="VisualShaderNodeFloatFunc" id="VisualShaderNodeFloatFunc_nrubk"]
function = 14

[sub_resource type="VisualShaderNodeFloatOp" id="VisualShaderNodeFloatOp_qrud0"]
default_input_values = [0, 0.0, 1, 2.0]
operator = 3

[sub_resource type="VisualShaderNodeFloatFunc" id="VisualShaderNodeFloatFunc_xnd8v"]
function = 14

[sub_resource type="VisualShaderNodeFloatOp" id="VisualShaderNodeFloatOp_y5w6b"]
operator = 1

[sub_resource type="VisualShaderNodeVectorCompose" id="VisualShaderNodeVectorCompose_ahr5d"]
op_type = 0

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_byjvm"]
default_input_values = [0, Vector2(0, 0), 1, Vector2(0, 0)]
op_type = 0

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_ojld2"]
default_input_values = [0, Vector2(0, 0), 1, Vector2(0, 0)]
op_type = 0
operator = 2

[sub_resource type="VisualShaderNodeFloatConstant" id="VisualShaderNodeFloatConstant_0vhrs"]
constant = 0.5

[sub_resource type="VisualShaderNodeVectorDecompose" id="VisualShaderNodeVectorDecompose_2wbhm"]
default_input_values = [0, Quaternion(0, 0, 0, 0)]
op_type = 2

[sub_resource type="VisualShaderNodeInput" id="VisualShaderNodeInput_rh0yh"]
input_name = "index"

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_k1hhe"]
default_input_values = [0, Quaternion(0, 0, 0, 0), 1, Quaternion(0, 0, 0, 0)]
op_type = 2
operator = 2

[sub_resource type="VisualShaderNodeTexture2DParameter" id="VisualShaderNodeTexture2DParameter_c3hqy"]
parameter_name = "DissolveTex"

[sub_resource type="VisualShaderNodeTexture" id="VisualShaderNodeTexture_u3g1d"]
source = 5

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_spgx8"]
default_input_values = [0, Quaternion(0, 0, 0, 0), 1, Quaternion(0, 0, 0, 0)]
op_type = 2
operator = 2

[sub_resource type="VisualShaderNodeMix" id="VisualShaderNodeMix_61rrw"]
default_input_values = [0, Quaternion(0, 0, 0, 0), 1, Quaternion(1, 1, 1, 1), 2, 0.5]
op_type = 6

[resource]
code = "shader_type particles;
uniform vec2 DissolveScale = vec2(1.000000, 1.000000);
uniform vec2 DissolveSpeed;
uniform sampler2D DissolveTex;
uniform sampler2D vectMainTex;
uniform float DissolveStrength : hint_range(0, 1) = 0;


float __rand_from_seed(inout uint seed) {
	int k;
	int s = int(seed);
	if (s == 0)
	s = 305420679;
	k = s / 127773;
	s = 16807 * (s - k * 127773) - 2836 * k;
	if (s < 0)
		s += 2147483647;
	seed = uint(s);
	return float(seed % uint(65536)) / 65535.0;
}

float __rand_from_seed_m1_p1(inout uint seed) {
	return __rand_from_seed(seed) * 2.0 - 1.0;
}

float __randf_range(inout uint seed, float from, float to) {
	return __rand_from_seed(seed) * (to - from) + from;
}

uint __hash(uint x) {
	x = ((x >> uint(16)) ^ x) * uint(73244475);
	x = ((x >> uint(16)) ^ x) * uint(73244475);
	x = (x >> uint(16)) ^ x;
	return x;
}

mat3 __build_rotation_mat3(vec3 axis, float angle) {
	axis = normalize(axis);
	float s = sin(angle);
	float c = cos(angle);
	float oc = 1.0 - c;
	return mat3(vec3(oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s, oc * axis.z * axis.x + axis.y * s), vec3(oc * axis.x * axis.y + axis.z * s, oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s), vec3(oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s, oc * axis.z * axis.z + c));
}

mat4 __build_rotation_mat4(vec3 axis, float angle) {
	axis = normalize(axis);
	float s = sin(angle);
	float c = cos(angle);
	float oc = 1.0 - c;
	return mat4(vec4(oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s, oc * axis.z * axis.x + axis.y * s, 0), vec4(oc * axis.x * axis.y + axis.z * s, oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s, 0), vec4(oc * axis.z * axis.x - axis.y * s, oc * axis.y * axis.z + axis.x * s, oc * axis.z * axis.z + c, 0), vec4(0, 0, 0, 1));
}

vec2 __get_random_unit_vec2(inout uint seed) {
	return normalize(vec2(__rand_from_seed_m1_p1(seed), __rand_from_seed_m1_p1(seed)));
}

vec3 __get_random_unit_vec3(inout uint seed) {
	return normalize(vec3(__rand_from_seed_m1_p1(seed), __rand_from_seed_m1_p1(seed), __rand_from_seed_m1_p1(seed)));
}



// 3D Noise with friendly permission by Inigo Quilez
vec3 hash_noise_range( vec3 p ) {
	p *= mat3(vec3(127.1, 311.7, -53.7), vec3(269.5, 183.3, 77.1), vec3(-301.7, 27.3, 215.3));
	return 2.0 * fract(fract(p)*4375.55) -1.;
}

void start() {
	uint __seed = __hash(NUMBER + uint(1) + RANDOM_SEED);

	{
// StartOutput:0
		if (RESTART_POSITION) {
			TRANSFORM = mat4(vec4(1.0, 0.0, 0.0, 0.0), vec4(0.0, 1.0, 0.0, 0.0), vec4(0.0, 0.0, 1.0, 0.0), vec4(0.0, 0.0, 0.0, 1.0));
			if (RESTART_VELOCITY) {
				VELOCITY = (EMISSION_TRANSFORM * vec4(VELOCITY, 0.0)).xyz;
			}
			TRANSFORM = EMISSION_TRANSFORM * TRANSFORM;
		}


	}
}

void process() {
	uint __seed = __hash(NUMBER + uint(1) + RANDOM_SEED);

	{
// VectorDecompose:16
		vec3 n_in16p0 = vec3(0.00000, 0.00000, 0.00000);
		float n_out16p0 = n_in16p0.x;
		float n_out16p1 = n_in16p0.y;
		float n_out16p2 = n_in16p0.z;


		float n_out18p0;
// Remap:18
		float n_in18p1 = -1.00000;
		float n_in18p2 = 1.00000;
		float n_in18p3 = 1.00000;
		float n_in18p4 = 0.20000;
		{
			float __input_range = n_in18p2 - n_in18p1;
			float __output_range = n_in18p4 - n_in18p3;
			n_out18p0 = n_in18p3 + __output_range * ((n_out16p1 - n_in18p1) / __input_range);
		}


// Vector2Parameter:14
		vec2 n_out14p0 = DissolveScale;


// VectorOp:15
		vec2 n_in15p0 = vec2(0.00000, 0.00000);
		vec2 n_out15p0 = n_in15p0 * n_out14p0;


// VectorOp:17
		vec2 n_out17p0 = vec2(n_out18p0) * n_out15p0;


// Vector2Parameter:12
		vec2 n_out12p0 = DissolveSpeed;


// VectorOp:13
		vec2 n_in13p0 = vec2(0.00000, 0.00000);
		vec2 n_out13p0 = n_in13p0 * n_out12p0;


// UVFunc:11
		vec2 n_in11p1 = vec2(1.00000, 1.00000);
		vec2 n_out11p0 = n_out13p0 * n_in11p1 + n_out17p0;


		vec4 n_out7p0;
// Texture2D:7
		n_out7p0 = texture(DissolveTex, n_out11p0);


// VectorDecompose:23
		float n_out23p0 = vec3(n_out7p0.xyz).x;
		float n_out23p1 = vec3(n_out7p0.xyz).y;
		float n_out23p2 = vec3(n_out7p0.xyz).z;


// VectorDecompose:25
		vec2 n_in25p0 = vec2(0.00000, 0.00000);
		float n_out25p0 = n_in25p0.x;
		float n_out25p1 = n_in25p0.y;


// FloatFunc:30
		float n_out30p0 = 1.0 - n_out25p1;


// FloatOp:24
		float n_out24p0 = n_out23p0 * n_out30p0;


// FloatOp:28
		float n_in28p1 = -0.10000;
		float n_out28p0 = n_out24p0 + n_in28p1;


// FloatOp:27
		float n_in27p1 = 0.20000;
		float n_out27p0 = n_out28p0 * n_in27p1;


// VectorOp:26
		vec2 n_in26p1 = vec2(0.00000, 0.00000);
		vec2 n_out26p0 = vec2(n_out27p0) + n_in26p1;


// Clamp:29
		vec2 n_in29p1 = vec2(0.00000, 0.00000);
		vec2 n_in29p2 = vec2(1.00000, 1.00000);
		vec2 n_out29p0 = clamp(n_out26p0, n_in29p1, n_in29p2);


// Input:40
		uint n_out40p0 = INDEX;


// RandomRange:31
		float n_in31p1 = 0.00000;
		float n_in31p2 = 4.00000;
		float n_out31p0 = mix(n_in31p1, n_in31p2, hash_noise_range(vec3(float(n_out40p0))).x);


// FloatFunc:32
		float n_out32p0 = floor(n_out31p0);


// FloatOp:33
		float n_in33p1 = 2.00000;
		float n_out33p0 = n_out31p0 / n_in33p1;


// FloatFunc:34
		float n_out34p0 = floor(n_out33p0);


// FloatOp:35
		float n_out35p0 = n_out32p0 - n_out34p0;


// VectorCompose:36
		vec2 n_out36p0 = vec2(n_out35p0, n_out34p0);


// VectorOp:37
		vec2 n_out37p0 = n_out29p0 + n_out36p0;


// FloatConstant:39
		float n_out39p0 = 0.500000;


// VectorOp:38
		vec2 n_out38p0 = n_out37p0 * vec2(n_out39p0);


		vec4 n_out3p0;
// Texture2D:3
		n_out3p0 = texture(vectMainTex, n_out38p0);


// VectorOp:8
		vec4 n_out8p0 = n_out3p0 * n_out7p0;


// FloatParameter:10
		float n_out10p0 = DissolveStrength;


// VectorDecompose:20
		vec3 n_in20p0 = vec3(0.00000, 0.00000, 0.00000);
		float n_out20p0 = n_in20p0.x;
		float n_out20p1 = n_in20p0.y;
		float n_out20p2 = n_in20p0.z;


		float n_out19p0;
// Remap:19
		float n_in19p1 = -0.50000;
		float n_in19p2 = 0.00000;
		float n_in19p3 = 0.00000;
		float n_in19p4 = 1.00000;
		{
			float __input_range = n_in19p2 - n_in19p1;
			float __output_range = n_in19p4 - n_in19p3;
			n_out19p0 = n_in19p3 + __output_range * ((n_out20p1 - n_in19p1) / __input_range);
		}


// FloatOp:21
		float n_out21p0 = n_out10p0 * n_out19p0;


// Clamp:22
		float n_in22p1 = 0.00000;
		float n_in22p2 = 1.00000;
		float n_out22p0 = clamp(n_out21p0, n_in22p1, n_in22p2);


// Mix:9
		vec4 n_out9p0 = mix(n_out3p0, n_out8p0, n_out22p0);


// VectorOp:5
		vec4 n_in5p0 = vec4(0.00000, 0.00000, 0.00000, 0.00000);
		vec4 n_out5p0 = n_in5p0 * n_out9p0;


// VectorDecompose:4
		float n_out4p0 = n_out9p0.x;
		float n_out4p1 = n_out9p0.y;
		float n_out4p2 = n_out9p0.z;
		float n_out4p3 = n_out9p0.w;


// ProcessOutput:0
		COLOR.rgb = vec3(n_out5p0.xyz);
		COLOR.a = n_out4p3;


	}
}

"
mode = 2
flags/collision_use_scale = false
flags/disable_force = false
flags/disable_velocity = false
flags/keep_data = false
nodes/process/0/position = Vector2(820, 400)
nodes/process/2/node = SubResource("VisualShaderNodeTexture2DParameter_4wumv")
nodes/process/2/position = Vector2(-2772.19, 562.929)
nodes/process/3/node = SubResource("VisualShaderNodeTexture_vwnnr")
nodes/process/3/position = Vector2(-732.189, 322.929)
nodes/process/4/node = SubResource("VisualShaderNodeVectorDecompose_2wbhm")
nodes/process/4/position = Vector2(467.811, 602.929)
nodes/process/5/node = SubResource("VisualShaderNodeVectorOp_k1hhe")
nodes/process/5/position = Vector2(467.811, 322.929)
nodes/process/6/node = SubResource("VisualShaderNodeTexture2DParameter_c3hqy")
nodes/process/6/position = Vector2(-3672.19, 602.929)
nodes/process/7/node = SubResource("VisualShaderNodeTexture_u3g1d")
nodes/process/7/position = Vector2(-3332.19, 422.929)
nodes/process/8/node = SubResource("VisualShaderNodeVectorOp_spgx8")
nodes/process/8/position = Vector2(-412.189, 342.929)
nodes/process/9/node = SubResource("VisualShaderNodeMix_61rrw")
nodes/process/9/position = Vector2(-192.189, 362.929)
nodes/process/10/node = SubResource("VisualShaderNodeFloatParameter_rqx40")
nodes/process/10/position = Vector2(-3952.19, 942.929)
nodes/process/11/node = SubResource("VisualShaderNodeUVFunc_ifn48")
nodes/process/11/position = Vector2(-3592.19, 422.929)
nodes/process/12/node = SubResource("VisualShaderNodeVec2Parameter_2vnsh")
nodes/process/12/position = Vector2(-4172.19, 482.929)
nodes/process/13/node = SubResource("VisualShaderNodeVectorOp_pwgs7")
nodes/process/13/position = Vector2(-3812.19, 442.929)
nodes/process/14/node = SubResource("VisualShaderNodeVec2Parameter_4o34k")
nodes/process/14/position = Vector2(-4392.19, 162.929)
nodes/process/15/node = SubResource("VisualShaderNodeVectorOp_gh632")
nodes/process/15/position = Vector2(-4092.19, 242.929)
nodes/process/16/node = SubResource("VisualShaderNodeVectorDecompose_wbxm7")
nodes/process/16/position = Vector2(-4172.19, -97.0713)
nodes/process/17/node = SubResource("VisualShaderNodeVectorOp_v8adm")
nodes/process/17/position = Vector2(-3812.19, 262.929)
nodes/process/18/node = SubResource("VisualShaderNodeRemap_qngqh")
nodes/process/18/position = Vector2(-3972.19, 2.92868)
nodes/process/19/node = SubResource("VisualShaderNodeRemap_3ib78")
nodes/process/19/position = Vector2(-3692.19, 1222.93)
nodes/process/20/node = SubResource("VisualShaderNodeVectorDecompose_5ojyf")
nodes/process/20/position = Vector2(-3872.19, 1222.93)
nodes/process/21/node = SubResource("VisualShaderNodeFloatOp_2tgi7")
nodes/process/21/position = Vector2(-3552.19, 942.929)
nodes/process/22/node = SubResource("VisualShaderNodeClamp_1rore")
nodes/process/22/position = Vector2(-3392.19, 1022.93)
nodes/process/23/node = SubResource("VisualShaderNodeVectorDecompose_uuin5")
nodes/process/23/position = Vector2(-2792.19, -297.071)
nodes/process/24/node = SubResource("VisualShaderNodeFloatOp_tlr4l")
nodes/process/24/position = Vector2(-2412.19, -177.071)
nodes/process/25/node = SubResource("VisualShaderNodeVectorDecompose_7k37n")
nodes/process/25/position = Vector2(-2792.19, -177.071)
nodes/process/26/node = SubResource("VisualShaderNodeVectorOp_g1laj")
nodes/process/26/position = Vector2(-1712.19, -137.071)
nodes/process/27/node = SubResource("VisualShaderNodeFloatOp_vn7pk")
nodes/process/27/position = Vector2(-2072.19, -177.071)
nodes/process/28/node = SubResource("VisualShaderNodeFloatOp_w3avm")
nodes/process/28/position = Vector2(-2252.19, -177.071)
nodes/process/29/node = SubResource("VisualShaderNodeClamp_3jm8e")
nodes/process/29/position = Vector2(-1552.19, -137.071)
nodes/process/30/node = SubResource("VisualShaderNodeFloatFunc_8w886")
nodes/process/30/position = Vector2(-2612.19, -97.0713)
nodes/process/31/node = SubResource("VisualShaderNodeRandomRange_sgdgy")
nodes/process/31/position = Vector2(-2332.19, 62.9287)
nodes/process/32/node = SubResource("VisualShaderNodeFloatFunc_nrubk")
nodes/process/32/position = Vector2(-2072.19, 22.9287)
nodes/process/33/node = SubResource("VisualShaderNodeFloatOp_qrud0")
nodes/process/33/position = Vector2(-2052.19, 102.929)
nodes/process/34/node = SubResource("VisualShaderNodeFloatFunc_xnd8v")
nodes/process/34/position = Vector2(-1892.19, 162.929)
nodes/process/35/node = SubResource("VisualShaderNodeFloatOp_y5w6b")
nodes/process/35/position = Vector2(-1712.19, 22.9287)
nodes/process/36/node = SubResource("VisualShaderNodeVectorCompose_ahr5d")
nodes/process/36/position = Vector2(-1512.19, 102.929)
nodes/process/37/node = SubResource("VisualShaderNodeVectorOp_byjvm")
nodes/process/37/position = Vector2(-1292.19, 42.9287)
nodes/process/38/node = SubResource("VisualShaderNodeVectorOp_ojld2")
nodes/process/38/position = Vector2(-1112.19, 42.9287)
nodes/process/39/node = SubResource("VisualShaderNodeFloatConstant_0vhrs")
nodes/process/39/position = Vector2(-1312.19, 202.929)
nodes/process/40/node = SubResource("VisualShaderNodeInput_rh0yh")
nodes/process/40/position = Vector2(-2620, 60)
nodes/process/connections = PackedInt32Array(2, 0, 3, 2, 6, 0, 7, 2, 3, 0, 8, 0, 7, 0, 8, 1, 3, 0, 9, 0, 8, 0, 9, 1, 11, 0, 7, 0, 12, 0, 13, 1, 13, 0, 11, 2, 14, 0, 15, 1, 15, 0, 17, 1, 17, 0, 11, 0, 16, 1, 18, 0, 18, 0, 17, 0, 20, 1, 19, 0, 10, 0, 21, 0, 19, 0, 21, 1, 21, 0, 22, 0, 22, 0, 9, 2, 9, 0, 5, 1, 9, 0, 4, 0, 7, 0, 23, 0, 23, 0, 24, 0, 24, 0, 28, 0, 28, 0, 27, 0, 26, 0, 29, 0, 27, 0, 26, 0, 25, 1, 30, 0, 30, 0, 24, 1, 31, 0, 32, 0, 31, 0, 33, 0, 33, 0, 34, 0, 34, 0, 35, 1, 32, 0, 35, 0, 35, 0, 36, 0, 34, 0, 36, 1, 29, 0, 37, 0, 36, 0, 37, 1, 37, 0, 38, 0, 39, 0, 38, 1, 38, 0, 3, 0, 5, 0, 0, 2, 4, 3, 0, 3, 40, 0, 31, 0)
